<!DOCTYPE html>
<html>
	<head>
		<title>Things I Like</title>
		<link rel="stylesheet" type="text/css" href="photos.css" />
	</head>

	<body>
		<div id="wrapper">

			<div id="main">
				<div>
					<img src="1.jpg" width="500" height="375" alt="I like cupcakes!" />
				</div>
				<div>
					<img src="2.jpg" width="500" height="375" alt="...and more cupcakes" />
				</div>
				<div>
					<img src="3.jpg" width="500" height="375" alt="Lots of cupcakes!" />
				</div>
				<div>
					<img src="4.jpg" width="500" height="375" alt="So much sugar!" />
				</div>
				<div>
					<img src="5.jpg" width="500" height="375" alt="mmmmm" />
				</div>
			</div><!-- close "main" -->

			<nav>
				<img src="left.png" width="64" height="64" alt="previous" id="previous" onclick="javascript:showPrevious();"/>
				<img src="right.png" width="64" height="64" alt="next" id="next" onclick="javascript:showNext();"/>
			</nav>

		</div><!-- close "wrapper" -->

		<script type="text/javascript">

			//find all the images in the page
			var mainDiv = document.getElementById("main");
			var imageDivs =  mainDiv.children;
			var numImages = imageDivs.length;
			console.log("There are " + numImages + " images on this page.");

			//get the alt text of an image and use it as a caption
			for ( var i=0; i<numImages; i++ ) {
				var divElement = imageDivs[ i ]; 	
				var imgElement = divElement.firstElementChild; //get the first tag node
				var descriptonText = imgElement.getAttribute("alt");
				console.log("The caption for image #" + i + " will be: " + descriptonText);
				var caption = document.createElement("div");
				caption.innerHTML = descriptonText;
				divElement.appendChild( caption );
			}

			//set up a variable to remember what image to use 
			var currentDivIndex = 0;

			//updateAllNodes will be our function to call 
			//whenever we need to update which image is shown
			updateAllNodes();

			function updateAllNodes() {
				for ( var i=0; i<numImages; i++ ) {
					var divNode = imageDivs[ i ]; 
					
					//test the divElement against the index that should be shown
					if ( i == currentDivIndex ) {
						divNode.setAttribute( "class", "show" );
					}else{
						divNode.setAttribute( "class", "hide" );
					}
					
				}
			}

			function showPrevious() {
				if ( currentDivIndex > 0 ) {
					currentDivIndex = currentDivIndex - 1;
			        console.log( "showPrevious called! currentDivIndex is: " + currentDivIndex );
					updateAllNodes();
				}
			}

			function showNext() {
				if ( currentDivIndex < numImages-1 ) {
					currentDivIndex = currentDivIndex + 1;
			        console.log( "showNext called! currentDivIndex is: " + currentDivIndex );
					updateAllNodes();
				}
			}
		</script>
	</body>
</html>